<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CYBER GEO INTELLIGENCE - DEEPSEEK AI</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Courier New', monospace;
        }

        body {
            background: #000000;
            color: #ffffff;
            line-height: 1.6;
            overflow-x: hidden;
        }

        .matrix-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
            opacity: 0.4;
        }

        .cyber-nav {
            background: linear-gradient(90deg, transparent, rgba(0, 255, 0, 0.3), transparent);
            border-bottom: 2px solid #00ff00;
            padding: 1rem 2rem;
            position: relative;
            box-shadow: 0 0 25px rgba(0, 255, 0, 0.4);
        }

        .nav-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .nav-brand {
            font-size: 1.6rem;
            font-weight: bold;
            text-shadow: 0 0 20px #00ff00;
            color: #00ff00;
        }

        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 25px;
            padding: 2rem;
            max-width: 1600px;
            margin: 0 auto;
        }

        .cyber-panel {
            background: rgba(0, 20, 0, 0.95);
            border: 2px solid #00ff00;
            padding: 1.5rem;
            position: relative;
            transition: all 0.3s ease;
            backdrop-filter: blur(15px);
        }

        .cyber-panel::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: #00ff00;
            box-shadow: 0 0 20px #00ff00;
            animation: scanline 2s linear infinite;
        }

        @keyframes scanline {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        .panel-header {
            color: #00ff00;
            font-size: 1.3rem;
            margin-bottom: 1.2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid #00ff00;
            padding-bottom: 0.5rem;
        }

        .deepseek-chat {
            height: 400px;
            display: flex;
            flex-direction: column;
        }

        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 1rem;
            background: rgba(0, 10, 0, 0.8);
            border: 1px solid #00ff00;
            margin-bottom: 1rem;
        }

        .message {
            margin-bottom: 1rem;
            padding: 0.8rem;
            border-radius: 5px;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .user-message {
            background: rgba(0, 255, 0, 0.1);
            border-left: 3px solid #00ff00;
            text-align: left;
        }

        .ai-message {
            background: rgba(0, 100, 255, 0.1);
            border-left: 3px solid #0066ff;
            text-align: right;
        }

        .chat-input {
            display: flex;
            gap: 10px;
        }

        .chat-input input {
            flex: 1;
            background: rgba(0, 255, 0, 0.1);
            border: 1px solid #00ff00;
            color: #ffffff;
            padding: 0.8rem;
            font-family: 'Courier New', monospace;
        }

        .chat-input button {
            background: transparent;
            color: #00ff00;
            border: 2px solid #00ff00;
            padding: 0.8rem 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .chat-input button:hover {
            background: rgba(0, 255, 0, 0.2);
        }

        .analysis-result {
            background: rgba(0, 50, 100, 0.2);
            border: 1px solid #0066ff;
            padding: 1rem;
            margin-top: 1rem;
            border-radius: 5px;
        }

        .bilingual-text {
            line-height: 1.8;
        }

        .english-text {
            color: #00ffff;
            margin-bottom: 0.8rem;
        }

        .arabic-text {
            color: #00ff00;
            direction: rtl;
        }

        .cyber-button {
            background: transparent;
            color: #00ff00;
            border: 2px solid #00ff00;
            padding: 0.8rem 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            margin-top: 1rem;
            text-transform: uppercase;
            font-weight: bold;
        }

        .cyber-button:hover {
            background: rgba(0, 255, 0, 0.1);
            box-shadow: 0 0 20px rgba(0, 255, 0, 0.4);
        }

        .terminal {
            background: #001100;
            border: 1px solid #00ff00;
            height: 300px;
            overflow-y: auto;
            padding: 1rem;
            font-family: 'Courier New', monospace;
        }

        .terminal-line {
            margin-bottom: 0.5rem;
            animation: typewriter 0.1s forwards;
            opacity: 0;
        }

        @keyframes typewriter {
            to { opacity: 1; }
        }

        .prompt { color: #00ff00; }
        .response { color: #ffffff; }
        .ai-response { color: #00ffff; }
        .success { color: #00ff00; }
        .error { color: #ff0000; }

        .cyber-footer {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(0, 20, 0, 0.95);
            border-top: 2px solid #00ff00;
            padding: 0.8rem 2rem;
            backdrop-filter: blur(15px);
        }

        .footer-nav {
            display: flex;
            gap: 1.2rem;
            justify-content: center;
        }
    </style>
</head>
<body>
    <canvas id="matrixCanvas" class="matrix-bg"></canvas>

    <nav class="cyber-nav">
        <div class="nav-container">
            <div class="nav-brand">
                DEEPSEEK GEO-INTELLIGENCE v3.0
            </div>
            <div style="color: #00ff00;">
                ● AI-POWERED ANALYSIS ● REAL-TIME MONITORING
            </div>
        </div>
    </nav>

    <div class="dashboard-grid">
        <!-- DeepSeek AI Chat -->
        <div class="cyber-panel">
            <div class="panel-header">
                DEEPSEEK AI ANALYST - المحلل بالذكاء الاصطناعي
                <span style="color: #00ffff;">● ONLINE</span>
            </div>
            <div class="deepseek-chat">
                <div class="chat-messages" id="chatMessages">
                    <div class="message ai-message">
                        <div class="bilingual-text">
                            <div class="english-text">
                                <strong>DeepSeek AI:</strong> Welcome to Geopolitical Intelligence Platform. 
                                I can analyze global situations, assess risks, and provide strategic insights. 
                                How can I assist you today?
                            </div>
                            <div class="arabic-text">
                                <strong>ديب سيك AI:</strong> مرحباً بكم في منصة الذكاء الجيوسياسي.
                                يمكنني تحليل الأوضاع العالمية، تقييم المخاطر، وتقديم رؤى استراتيجية.
                                كيف يمكنني مساعدتك اليوم؟
                            </div>
                        </div>
                    </div>
                </div>
                <div class="chat-input">
                    <input type="text" id="chatInput" placeholder="Ask about geopolitical situations, risk assessment, or strategic analysis... - اسأل عن الأوضاع الجيوسياسية، تقييم المخاطر، أو التحليل الاستراتيجي..." onkeypress="handleChatInput(event)">
                    <button onclick="sendMessage()">SEND - إرسال</button>
                </div>
            </div>
        </div>

        <!-- النظام والمراقبة -->
        <div class="cyber-panel">
            <div class="panel-header">
                SYSTEM MONITOR - مراقب النظام
                <span style="color: #00ff00;">● NOMINAL</span>
            </div>
            <div class="terminal" id="mainTerminal">
                <div class="terminal-line">
                    <span class="prompt">DEEPSEEK-GEO></span> 
                    <span class="command">initialize_system --ai-enhanced</span>
                </div>
                <div class="terminal-line">
                    <span class="response">> INITIALIZING DEEPSEEK AI INTEGRATION...</span>
                </div>
                <div class="terminal-line">
                    <span class="response success">> DEEPSEEK API: CONNECTED</span>
                </div>
                <div class="terminal-line">
                    <span class="response success">> GEOPOLITICAL DATABASE: LOADED</span>
                </div>
                <div class="terminal-line">
                    <span class="response success">> REAL-TIME ANALYSIS: ACTIVE</span>
                </div>
                <div class="terminal-line">
                    <span class="prompt">DEEPSEEK-GEO></span> 
                    <span class="command" id="currentCommand">_</span>
                </div>
            </div>
            <button class="cyber-button" onclick="runQuickAnalysis()">
                QUICK RISK ASSESSMENT - تقييم سريع للمخاطر
            </button>
        </div>

        <!-- التحليل التلقائي -->
        <div class="cyber-panel">
            <div class="panel-header">
                AUTO ANALYSIS - تحليل تلقائي
                <span style="color: #ffff00;">● READY</span>
            </div>
            <div id="autoAnalysisResults">
                <div style="text-align: center; padding: 2rem; color: #666;">
                    Click below to generate AI analysis - انقر أدناه لإنشاء تحليل بالذكاء الاصطناعي
                </div>
            </div>
            <button class="cyber-button" onclick="generateRegionalAnalysis()">
                ANALYZE MIDDLE EAST - تحليل الشرق الأوسط
            </button>
            <button class="cyber-button" onclick="generateGlobalReport()">
                GLOBAL RISK REPORT - تقرير المخاطر العالمي
            </button>
        </div>

        <!-- نتائج متقدمة -->
        <div class="cyber-panel">
            <div class="panel-header">
                AI INSIGHTS - رؤى الذكاء الاصطناعي
                <span style="color: #00ffff;">● LIVE</span>
            </div>
            <div id="aiInsights">
                <div class="analysis-result">
                    <div class="bilingual-text">
                        <div class="english-text">
                            <strong>Current Global Situation:</strong><br>
                            • Moderate geopolitical tensions in key regions<br>
                            • Economic stability concerns in emerging markets<br>
                            • Cybersecurity threats on the rise<br>
                            • Climate change impacting strategic resources
                        </div>
                        <div class="arabic-text">
                            <strong>الوضع العالمي الحالي:</strong><br>
                            • توترات جيوسياسية متوسطة في المناطق الرئيسية<br>
                            • مخاوف الاستقرار الاقتصادي في الأسواق الناشئة<br>
                            • تهديدات الأمن السيبراني في تزايد<br>
                            • تغير المناخ يؤثر على الموارد الاستراتيجية
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="cyber-footer">
        <div class="footer-nav">
            <button class="cyber-button" style="width: auto;" onclick="showDashboard()">DASHBOARD</button>
            <button class="cyber-button" style="width: auto;" onclick="showThreatMap()">THREAT MAP</button>
            <button class="cyber-button" style="width: auto;" onclick="showDeepSeekDocs()">DEEPSEEK API</button>
            <button class="cyber-button" style="width: auto;" onclick="exportAnalysis()">EXPORT DATA</button>
        </div>
    </div>

    <script>
        // تكامل DeepSeek API - بدون API Key ثابت
        const DEEPSEEK_API_URL = 'https://api.deepseek.com/v1/chat/completions';

        class DeepSeekAnalyzer {
            constructor() {
                this.conversationHistory = [];
                this.isAnalyzing = false;
                this.secureService = new SecureDeepSeekService();
                this.isSecureInitialized = false;
            }

            async initializeSecureService() {
                if (!this.isSecureInitialized) {
                    this.isSecureInitialized = await this.secureService.initialize();
                }
                return this.isSecureInitialized;
            }

            async analyzeWithAI(prompt, context = '') {
                if (this.isAnalyzing) {
                    throw new Error('Analysis already in progress');
                }

                this.isAnalyzing = true;
                
                try {
                    // محاولة استخدام الخدمة الآمنة أولاً
                    const isSecureReady = await this.initializeSecureService();
                    
                    if (isSecureReady) {
                        const response = await this.secureService.analyzeGeopolitical(prompt, context);
                        this.conversationHistory.push({ role: 'user', content: prompt });
                        this.conversationHistory.push({ role: 'assistant', content: response });
                        return response;
                    } else {
                        // استخدام المحاكاة إذا فشل الاتصال الآمن
                        return this.generateSimulatedResponse(prompt);
                    }
                } catch (error) {
                    console.error('DeepSeek API Error:', error);
                    // استخدام المحاكاة كبديل
                    return this.generateSimulatedResponse(prompt);
                } finally {
                    this.isAnalyzing = false;
                }
            }

            buildAnalysisPrompt(prompt, context) {
                return `أنت محلل جيوسياسي خبير في منصة الذكاء الاستراتيجي. قم بتحليل السؤال التالي مع تقديم إجابة مفصلة ثنائية اللغة (الإنجليزية والعربية).

السياق: ${context}

السؤال: ${prompt}

يرجى تقديم الإجابة بالشكل التالي:

[التحليل باللغة الإنجليزية - English Analysis]
• تحليل مفصل مع نقاط رئيسية
• تقييم المخاطر والفرص
• التوصيات الاستراتيجية

[التحليل باللغة العربية - Arabic Analysis]
• تحليل مفصل مع نقاط رئيسية  
• تقييم المخاطر والفرص
• التوصيات الاستراتيجية

تأكد من:
1. الدقة في المعلومات الجيوسياسية
2. التوازن في التحليل
3. الترجمة الصحيحة والمهنية
4. التنسيق الواضح والمنظم`;
            }

            generateSimulatedResponse(prompt) {
                const responses = {
                    'risk': `
[English Analysis - التحليل بالإنجليزية]
• Global risk assessment indicates moderate instability in several regions
• Economic pressures and political tensions are primary concerns
• Cybersecurity threats require immediate attention
• Strategic recommendations: Enhance diplomatic efforts, diversify economic partnerships

[Arabic Analysis - التحليل بالعربية]
• يشير تقييم المخاطر العالمية إلى عدم استقرار متوسط في عدة مناطق
• الضغوط الاقتصادية والتوترات السياسية هي الاهتمامات الرئيسية
• تهديدات الأمن السيبراني تتطلب اهتماماً فورياً
• التوصيات الاستراتيجية: تعزيز الجهود الدبلوماسية، تنويع الشراكات الاقتصادية
                    `,
                    'middle east': `
[English Analysis - التحليل بالإنجليزية]
• Middle East region shows complex geopolitical dynamics
• Energy security remains a critical factor
• Regional alliances are shifting significantly
• Economic diversification efforts showing positive results

[Arabic Analysis - التحليل بالعربية]
• تظهر منطقة الشرق الأوسط ديناميكيات جيوسياسية معقدة
• أمن الطاقة يبقى عاملاً حاسماً
• التحالفات الإقليمية تتغير بشكل كبير
• جهود تنويع الاقتصاد تظهر نتائج إيجابية
                    `,
                    'default': `
[English Analysis - التحليل بالإنجليزية]
• Comprehensive analysis of the geopolitical landscape reveals evolving challenges
• Strategic adaptation required for emerging global trends
• Focus on sustainable development and international cooperation
• Monitoring key indicators for early warning signals

[Arabic Analysis - التحليل بالعربية]
• يكشف التحليل الشامل للمشهد الجيوسياسي عن تحديات متطورة
• مطلوب تكيف استراتيجي للاتجاهات العالمية الناشئة
• التركيز على التنمية المستدامة والتعاون الدولي
• مراقبة المؤشرات الرئيسية لإشارات الإنذار المبكر
                    `
                };

                if (prompt.toLowerCase().includes('risk') || prompt.toLowerCase().includes('مخاطر')) {
                    return responses.risk;
                } else if (prompt.toLowerCase().includes('middle east') || prompt.includes('الشرق')) {
                    return responses['middle east'];
                } else {
                    return responses.default;
                }
            }
        }

        // تهيئة النظام
        const aiAnalyzer = new DeepSeekAnalyzer();

        document.addEventListener('DOMContentLoaded', function() {
            initializePlatform();
            startMatrixEffect();
            initializeTerminal();
            
            // تهيئة الخدمة الآمنة عند تحميل الصفحة
            setTimeout(() => {
                aiAnalyzer.initializeSecureService().then(success => {
                    if (success) {
                        addTerminalLine('SECURE DEEPSEEK SERVICE INITIALIZED - تم تهيئة خدمة DeepSeek الآمنة');
                    } else {
                        addTerminalLine('USING SIMULATED ANALYSIS MODE - استخدام وضع التحليل المحاكى');
                    }
                });
            }, 1000);
        });

        function initializePlatform() {
            addTerminalLine('DEEPSEEK AI SYSTEM READY - AWAITING USER QUERIES - نظام الذكاء الاصطناعي جاهز - في انتظار استفسارات المستخدم');
        }

        function startMatrixEffect() {
            const canvas = document.getElementById('matrixCanvas');
            const ctx = canvas.getContext('2d');
            
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            
            const chars = "アァカサタナハマヤャラワガザダバパイィキシチニヒミリヰギジヂビピウゥクスツヌフムユュルグズブヅプエェケセテネヘメレヱゲゼデベペオォコソトノホモヨョロヲゴゾドボポヴッン0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ";
            const charArray = chars.split("");
            const fontSize = 18;
            const columns = canvas.width / fontSize;
            const drops = [];
            
            for(let i = 0; i < columns; i++) {
                drops[i] = Math.random() * canvas.height;
            }
            
            function draw() {
                ctx.fillStyle = 'rgba(0, 0, 0, 0.05)';
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                
                ctx.font = fontSize + 'px monospace';
                
                for(let i = 0; i < drops.length; i++) {
                    const text = charArray[Math.floor(Math.random() * charArray.length)];
                    const x = i * fontSize;
                    const y = drops[i];
                    
                    const opacity = Math.min(1, (canvas.height - y) / canvas.height);
                    ctx.fillStyle = `rgba(0, 255, 0, ${opacity})`;
                    
                    ctx.fillText(text, x, y);
                    
                    if(y > canvas.height && Math.random() > 0.975) {
                        drops[i] = 0;
                    }
                    
                    drops[i] += fontSize * 0.8;
                }
            }
            
            setInterval(draw, 50);
        }

        // إدارة المحادثة
        async function sendMessage() {
            const input = document.getElementById('chatInput');
            const message = input.value.trim();
            
            if (!message) return;
            
            addChatMessage('user', message);
            input.value = '';
            
            // عرض رسالة تحميل
            const loadingMsg = addChatMessage('ai', 'Analyzing with DeepSeek AI... - جاري التحليل مع DeepSeek AI...');
            
            try {
                const analysis = await aiAnalyzer.analyzeWithAI(message, 'geopolitical intelligence');
                loadingMsg.remove();
                addChatMessage('ai', analysis);
            } catch (error) {
                loadingMsg.remove();
                addChatMessage('ai', `Analysis error: ${error.message} - خطأ في التحليل: ${error.message}`);
            }
        }

        function handleChatInput(event) {
            if (event.key === 'Enter') {
                sendMessage();
            }
        }

        function addChatMessage(role, content) {
            const chatMessages = document.getElementById('chatMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${role}-message`;
            
            if (content.includes('[English Analysis]') && content.includes('[Arabic Analysis]')) {
                // تنسيق التحليل المنظم
                const parts = content.split('[');
                let englishPart = '';
                let arabicPart = '';
                
                parts.forEach(part => {
                    if (part.startsWith('English Analysis]')) {
                        englishPart = part.replace('English Analysis] - التحليل بالإنجليزية]', '').trim();
                    } else if (part.startsWith('Arabic Analysis]')) {
                        arabicPart = part.replace('Arabic Analysis] - التحليل بالعربية]', '').trim();
                    }
                });
                
                messageDiv.innerHTML = `
                    <div class="bilingual-text">
                        <div class="english-text">
                            <strong>DeepSeek AI Analysis:</strong><br>
                            ${englishPart.replace(/\n/g, '<br>')}
                        </div>
                        <div class="arabic-text">
                            <strong>تحليل DeepSeek AI:</strong><br>
                            ${arabicPart.replace(/\n/g, '<br>')}
                        </div>
                    </div>
                `;
            } else {
                // رسالة عادية
                messageDiv.textContent = content;
            }
            
            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
            
            return messageDiv;
        }

        // التحليلات التلقائية
        async function runQuickAnalysis() {
            addTerminalLine('INITIATING QUICK RISK ASSESSMENT WITH DEEPSEEK AI - بدء تقييم سريع للمخاطر مع DeepSeek AI');
            
            try {
                const analysis = await aiAnalyzer.analyzeWithAI(
                    'Provide a quick global risk assessment with current threats and opportunities', 
                    'quick risk scan'
                );
                
                document.getElementById('aiInsights').innerHTML = `
                    <div class="analysis-result">
                        <div class="bilingual-text">
                            ${formatAnalysis(analysis)}
                        </div>
                    </div>
                `;
                
                addTerminalLine('QUICK RISK ASSESSMENT COMPLETED - تم الانتهاء من تقييم المخاطر السريع');
            } catch (error) {
                addTerminalLine(`ASSESSMENT ERROR: ${error.message} - خطأ في التقييم: ${error.message}`);
            }
        }

        async function generateRegionalAnalysis() {
            addTerminalLine('GENERATING MIDDLE EAST ANALYSIS - جاري إنشاء تحليل الشرق الأوسط');
            
            try {
                const analysis = await aiAnalyzer.analyzeWithAI(
                    'Comprehensive analysis of Middle East geopolitical situation, risks, and strategic recommendations',
                    'middle east regional analysis'
                );
                
                document.getElementById('autoAnalysisResults').innerHTML = `
                    <div class="analysis-result">
                        <div style="color: #00ffff; margin-bottom: 1rem; font-weight: bold;">
                            MIDDLE EAST ANALYSIS - تحليل الشرق الأوسط
                        </div>
                        <div class="bilingual-text">
                            ${formatAnalysis(analysis)}
                        </div>
                    </div>
                `;
            } catch (error) {
                addTerminalLine(`ANALYSIS ERROR: ${error.message} - خطأ في التحليل: ${error.message}`);
            }
        }

        async function generateGlobalReport() {
            addTerminalLine('GENERATING COMPREHENSIVE GLOBAL RISK REPORT - جاري إنشاء تقرير المخاطر العالمي الشامل');
            
            try {
                const analysis = await aiAnalyzer.analyzeWithAI(
                    'Comprehensive global risk report covering political, economic, security, and environmental risks with strategic recommendations',
                    'global risk assessment'
                );
                
                document.getElementById('autoAnalysisResults').innerHTML = `
                    <div class="analysis-result">
                        <div style="color: #ff0000; margin-bottom: 1rem; font-weight: bold;">
                            GLOBAL RISK REPORT - تقرير المخاطر العالمي
                        </div>
                        <div class="bilingual-text">
                            ${formatAnalysis(analysis)}
                        </div>
                    </div>
                `;
            } catch (error) {
                addTerminalLine(`REPORT GENERATION ERROR: ${error.message} - خطأ في إنشاء التقرير: ${error.message}`);
            }
        }

        function formatAnalysis(analysis) {
            if (analysis.includes('[English Analysis]') && analysis.includes('[Arabic Analysis]')) {
                const parts = analysis.split('[');
                let englishPart = '';
                let arabicPart = '';
                
                parts.forEach(part => {
                    if (part.startsWith('English Analysis]')) {
                        englishPart = part.replace('English Analysis] - التحليل بالإنجليزية]', '').trim();
                    } else if (part.startsWith('Arabic Analysis]')) {
                        arabicPart = part.replace('Arabic Analysis] - التحليل بالعربية]', '').trim();
                    }
                });
                
                return `
                    <div class="english-text">
                        <strong>English Analysis:</strong><br>
                        ${englishPart.replace(/\n/g, '<br>')}
                    </div>
                    <div class="arabic-text">
                        <strong>التحليل بالعربية:</strong><br>
                        ${arabicPart.replace(/\n/g, '<br>')}
                    </div>
                `;
            }
            return analysis;
        }

        // وظائف مساعدة
        function addTerminalLine(message) {
            const terminal = document.getElementById('mainTerminal');
            const line = document.createElement('div');
            line.className = 'terminal-line';
            
            if (message.includes('DEEPSEEK') || message.includes('AI')) {
                line.innerHTML = `<span class="ai-response">> ${message}</span>`;
            } else {
                line.innerHTML = `<span class="response">> ${message}</span>`;
            }
            
            terminal.appendChild(line);
            terminal.scrollTop = terminal.scrollHeight;
        }

        function initializeTerminal() {
            const lines = document.querySelectorAll('.terminal-line');
            lines.forEach((line, index) => {
                line.style.animationDelay = (index * 0.3) + 's';
            });
        }

        function showDashboard() {
            addTerminalLine('ACCESSING MAIN DASHBOARD - الوصول إلى لوحة التحكم الرئيسية');
        }

        function showThreatMap() {
            addTerminalLine('OPENING GLOBAL THREAT MAP - فتح خريطة التهديدات العالمية');
            window.open('threat-map.html', '_blank');
        }

        function showDeepSeekDocs() {
            addTerminalLine('ACCESSING DEEPSEEK API DOCUMENTATION - الوصول إلى وثائق DeepSeek API');
            window.open('https://platform.deepseek.com/api-docs/', '_blank');
        }

        function exportAnalysis() {
            const analysisData = {
                timestamp: new Date().toISOString(),
                conversationHistory: aiAnalyzer.conversationHistory,
                lastAnalysis: document.getElementById('aiInsights').innerText
            };
            
            const dataStr = "data:text/json;charset=utf-8," + encodeURIComponent(JSON.stringify(analysisData, null, 2));
            const downloadAnchor = document.createElement('a');
            downloadAnchor.setAttribute("href", dataStr);
            downloadAnchor.setAttribute("download", "deepseek_analysis.json");
            document.body.appendChild(downloadAnchor);
            downloadAnchor.click();
            downloadAnchor.remove();
            
            addTerminalLine('ANALYSIS DATA EXPORTED - تم تصدير بيانات التحليل');
        }

        // التعامل مع إعادة حجم الشاشة
        window.addEventListener('resize', function() {
            const canvas = document.getElementById('matrixCanvas');
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        });
    </script>

    <script src="deepseek-config.js"></script>
</body>
</html>